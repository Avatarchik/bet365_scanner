b365.aggregator=function(){function n(){t=this;this._stemTopicHandlers={};this._fixtureStems=[];this._lookup={};this._manager=null}var t=null,u=window.ns_gen5_util.Delegate,r=b365.Attribute,i="update",f="2";return n.prototype.registerFixtureHandlers=function(n){var i="FX_"+n.topicid,t;n&&n instanceof b365.aggregator.StemTopicHandler&&(t=this._stemTopicHandlers[i],t||(t=this._stemTopicHandlers[i]=[]),t.push(n))},n.prototype.registerMarketHandlers=function(n,t,i,r){var f="MA_"+r.topicid,u;r&&r instanceof b365.aggregator.StemTopicHandler&&(this._lookup[t]||(this._lookup[t]={},this._lookup[t].markets=i,this._lookup[t].classificationId=n),u=this._stemTopicHandlers[f],u||(u=this._stemTopicHandlers[f]=[]),u.push(r))},n.prototype.start=function(){var t,r,o,s,h=0,v,u,e,l,y,p,w,a,c,n;this._manager||(this._manager=ns_moblib_data.IPPGManager.getInstance());for(c in this._lookup)if(this._lookup.hasOwnProperty(c)){u=this._lookup[c];t=new ns_gen5_data.FixtureStem;l=Object.keys(u.markets)[0];y=l.indexOf("/")>-1?l.split("/")[0]:l;t.data={FS:"1",PT:c,IT:"FX_"+c,CL:u.classificationId,TR:y};this._fixtureStems.push(t);this._eventAttacher(t,i,"_stemUpdateEventReceived",this._stemUpdateEventReceived);for(n in u.markets)for(e=u.markets[n],r=new ns_gen5_data.Stem,p=n.indexOf("/")>-1?n.split("/")[1]:n,w=e.altmarkettopic&&e.altmarkettopic.indexOf("/")>-1?e.altmarkettopic.split("/")[1]:e.altmarkettopic,a=u.classificationId===f?null:this._getPlbtIdFromIppgTopic(n),r.data={ID:a?a:"MA_"+n,IT:"MA_"+n,ML:p,EM:w},r.nodeName="MA",this._eventAttacher(r,i,"_marketStemUpdateEventReceivedHandler",this._marketStemUpdateEventReceivedHandler),t.insert(r),o=new ns_gen5_data.Stem,o.data={ID:"CO_"+n,IT:"CO_"+n},o.nodeName="CO",r.insert(o),h=0,v=e.participantCount;h<v;h++)s=new ns_gen5_data.Stem,s.data={ID:"PA"+(h+1)+"_"+n,IT:"PA"+(h+1)+"_"+n},s.nodeName="PA",this._eventAttacher(s,i,"_participantUpdateEventReceived",function(n){return this._participantUpdateEventReceived(n)}),o.insert(s);this._manager.registerFixture(t)}},n.prototype._getPlbtIdFromIppgTopic=function(n){var u="",r=n.split("/"),f,t,e,i;return r&&r.length>1&&(f=r[1],t=f.split("_"),t&&t.length>0&&(e=t[0],i=e.split("-"),i&&i.length>1&&(u=i[1]))),u},n.prototype.dispose=function(){var n,i;for(this._manager&&(this._manager.dispose(),this._manager=null),n=0,i=this._fixtureStems.length;n<i;n++)this._fixtureStems[n].remove();this._aggregatorDelegate.dispose();t=null},n.prototype._stemUpdateEventReceived=function(n){var t=n.data.IT||n.target.data.IT;this._triggerEventListeners(n.target,n.data,t)},n.prototype._marketStemUpdateEventReceivedHandler=function(n){var t=n.data.IT||n.target.data.IT;this._triggerEventListeners(n.target,n.data,t)},n.prototype._participantUpdateEventReceived=function(n){for(var r,t=n.target,i=t.nodeName;i!=="MA";)if(t&&t.parent)t=t.parent,i=t.nodeName;else break;r=t.data.IT;this._triggerEventListeners(n.target,n.data,r)},n.prototype._triggerEventListeners=function(n,i,u){window.Locator.validationManager.callLater(function(){var e=t._stemTopicHandlers[u],h=u.replace("MA_","").replace("PA_",""),f,o,c,s;if(e&&e.length>0)for(o=0,c=e.length;o<c;o++)if(f=e[o],f&&f.handler&&f.dataAttribute)if(typeof f.dataAttribute=="string"&&(i[f.dataAttribute]||i[r.FIXTURE_STARTED]))f.handler(n,h);else if(Array.isArray(f.dataAttribute))for(s=f.dataAttribute.length-1;s>=0;s--)if(i[f.dataAttribute[s]]||i[r.FIXTURE_STARTED]){f.handler(n,h);break}})},n.prototype._eventAttacher=function(n,t,i,r){this._aggregatorDelegate.registerDelegate(n,t,i,this,r)},n.AggregatorDelegate=function(){function n(){this._topicBasedDelegateLookup={}}return n.prototype.hasDelegate=function(n){return!!this._topicBasedDelegateLookup[n]},n.prototype.registerDelegate=function(n,t,i,r,f){var e,o;e=this._topicBasedDelegateLookup[i];o=new u(r,f);e||(e=this._topicBasedDelegateLookup[i]=[]);n.hasEventListener(t)&&n.removeEventListener(t,o);n.addEventListener(t,o);e.push({delegate:o,stem:n,type:t})},n.prototype.unregisterDelegates=function(n){var t=this._topicBasedDelegateLookup[n],i,r;if(t&&t.length>0)for(i=0,r=t.length;i<r;i++)t[i].stem.removeEventListener(t[i].type,t[i].delegate);t&&delete this._topicBasedDelegateLookup[n]},n.prototype.dispose=function(){var t,n,i,r;for(r in this._topicBasedDelegateLookup)for(t=this._topicBasedDelegateLookup[r],n=0,i=t.length;n<i;n++)t[n].stem.removeEventListener(t[n].type,t[n].delegate);this._topicBasedDelegateLookup={}},n}(),n.prototype._aggregatorDelegate=new n.AggregatorDelegate,n.StemTopicHandler=function(){function n(n,t,i){n&&(this.topicid=n);i&&(this.handler=i);t&&(this.dataAttribute=t)}return n.prototype.topicid=null,n.prototype.dataAttribute=null,n.prototype.handler=null,n}(),n}();b365.IPPGExtraTimeFormatter=function(){function n(n){this._fixtureElements=n;n&&n.metainfo&&(this._metaInfo=n.metainfo);this._extraTimeIcons=[]}var t=b365.Attribute;return n.prototype.dataAttribute=t.MATCHLIVE_PERIOD,n.prototype.method=function(n){for(i=0,len=this._metaInfo.length;i<len;i++)if(this._metaInfo[i]!=null){var t=n.data[this.dataAttribute]==="2"||n.data[this.dataAttribute]==="3";t&&this._extraTimeIcons[i]==null?(this._extraTimeIcons[i]=document.createElement("div"),this._extraTimeIcons[i].className="ippg-Market_ExtraTime",this._extraTimeIcons[i].appendChild(document.createTextNode(b365.ml.ExtraTimeShort)),this._metaInfo[i][0].insertBefore(this._extraTimeIcons[i],this._metaInfo[i][0].firstChild)):t||this._extraTimeIcons[i]==null||(this._metaInfo[i][0].removeChild(this._extraTimeIcons[i]),this._extraTimeIcons[i]=null)}},n}();b365.IPPGScoreFormatter=function(){function n(n){n&&n.scores&&(this._scoresElements=n.scores)}var t=b365.Attribute;return n.prototype.dataAttribute=t.SHORT_SCORE,n.prototype.method=function(n){var t,r,i;if(this._scoresElements&&this._isDataValid(n.data))for(i=n.data[this.dataAttribute].split("-"),t=0,r=this._scoresElements.length;t<r;t++)this._scoresElements[t][0].textContent=i[0],this._scoresElements[t][1].textContent=i[1]},n.prototype._isDataValid=function(n){return n[this.dataAttribute]&&n[this.dataAttribute].indexOf("-")>-1},n}();b365.IPPGGaelicSportsScoreFormatter=function(){function n(n){n&&n.scores&&(this._scoresElements=n.scores)}var t=b365.Attribute;return n.prototype.dataAttribute=t.SHORT_SCORE,n.prototype.method=function(n){var t,r,i,u,f;if(this._scoresElements&&this._isDataValid(n.data))for(i=n.data[this.dataAttribute].split("-"),u=this._getGoalScore(i[0]),f=this._getGoalScore(i[1]),t=0,r=this._scoresElements.length;t<r;t++)this._scoresElements[t][0].textContent=u,this._scoresElements[t][1].textContent=f,this._scoresElements[t][0].appendChild(this._getTotalScoreElement(i[0])),this._scoresElements[t][1].appendChild(this._getTotalScoreElement(i[1]))},n.prototype._getGoalScore=function(n){return n.split("(")[0].replace(".","-")},n.prototype._getTotalScoreElement=function(n){var t=document.createElement("span");return b365Mobile.utils.addOrAppendClass(t,"ippg-PointNode"),b365Mobile.utils.addOrAppendClass(t,"ippg-PointNode_"+this.dataAttribute.toLowerCase()),t.textContent=n.split("(")[1].split(")")[0],t},n.prototype._isDataValid=function(n){var t=n[this.dataAttribute];return t&&t.indexOf("-")>-1&&t.indexOf(".")>-1&&t.indexOf("(")>-1&&t.indexOf(")")>-1},n}();b365.IPPGSetsBasedSportFormatter=function(){function n(n){n&&n.scores&&(this._scoresElements=n.scores,this._setScores=[])}var t="FIRST_PARTICIPANT",r="SECOND_PARTICIPANT",i=b365.Attribute;return n.prototype.dataAttribute=[i.SHORT_POINTS,i.SHORT_SCORE],n.prototype.method=function(n){this._scoresElements&&(this._clearExistingMarkup(t),this._clearExistingMarkup(r),this._displayScores(n.data))},n.prototype._displayScores=function(n){var i=this._getScores(n);this._applyPlayerScoresMarkup(t,i);this._applyPlayerScoresMarkup(r,i)},n.prototype._getScores=function(n){var t=n[i.SHORT_SCORE],r=(n[i.SHORT_POINTS]||"0-0").split(",");return ns_inplaylib_utils.FixtureDataConverter.ConvertScoreToShortScore(r,t)},n.prototype._clearExistingMarkup=function(n){for(var e=n===t?0:1,r,u,i=0,f=this._scoresElements.length;i<f;i++)for(u=this._scoresElements[i][e],r=u.getElementsByClassName("ippg-PointNode");r.length>0;)u.removeChild(r[0])},n.prototype._applyPlayerScoresMarkup=function(n,i){for(var f=n===t?0:1,r=0,u=i.length;r<u;r++)this._insertPlayerScoreMarket(f,i[r])},n.prototype._insertPlayerScoreMarket=function(n,t){for(var r,i=0,u=this._scoresElements.length;i<u;i++)t[n]&&(r=document.createElement("span"),b365Mobile.utils.addOrAppendClass(r,"ippg-PointNode"),r.textContent=t[n],this._scoresElements[i][n].appendChild(r))},n}();b365.IPPGClockFormatter=function(){function n(n){this._fixtureElements=n;n&&n.metainfo&&(this._metaInfo=n.metainfo);this._timerHasBeenInitialized=!1}var t=b365.Attribute;return n.prototype.dataAttribute=t.TMR_UPDATED,n.prototype.method=function(n){var e,f=!1,u,i,r,o;for(n&&n.data&&n.data[t.DISPLAY_CLOCK]&&(f=n.data[t.DISPLAY_CLOCK]==="1"),r=0,o=this._metaInfo.length;r<o;r++)this._metaInfo[r]&&(u=this._metaInfo[r][0].querySelector(".ippg-Market_GameInfo"),this._timerHasBeenInitialized?i=u.querySelector(".ippg-Market_GameClock"):(i=document.createElement("span"),i.className="ippg-Market_GameClock",e=this._buildTimerNode(n),i.appendChild(e._active_element),u.appendChild(i)),this._manageClockVisibility(i,f),this._manageContainerVisibility(u,f));this._timerHasBeenInitialized=!0},n.prototype._manageClockVisibility=function(n,t){t?b365Mobile.utils.removeClass(n,"Hidden"):b365Mobile.utils.addOrAppendClass(n,"Hidden")},n.prototype._manageContainerVisibility=function(n,t){var i=n.querySelector(".ippg-Market_GamePeriod");t||i?b365Mobile.utils.addOrAppendClass(n,"active"):b365Mobile.utils.removeClass(n,"active")},n.prototype._buildTimerNode=function(n){var t=new ns_inplaylib_general.GameTimerTextNode;return t.setStem(n),t.initialize(),t},n}();b365.IPPGStartFormatter=function(){function n(n){this._fixtureElements=n;n&&n.metainfo&&(this._metaInfo=n.metainfo);n&&n.metainfo&&(this._fixtures=n.fixtures)}var t=b365.Attribute;return n.prototype.dataAttribute=t.FIXTURE_STARTED,n.prototype.method=function(n){var e,r,o,i,u,h,s,f,c;if(n&&n.data&&n.data[t.FIXTURE_STARTED]==="1"){for(i=0,u=this._fixtures.length;i<u;i++)this._fixtures[i]&&(r=this._fixtures[i],r&&(r.setAttribute("data-nav","InPlay"),b365Mobile.utils.addOrAppendClass(r,"ippg-MarketInPlay"))),this._metaInfo[i]&&(o=this._metaInfo[i][0],e=o.querySelector(".ippg-Market_GameStartTime"),e&&o.removeChild(e));if(this._fixtureElements&&this._fixtureElements.markets)for(c in this._fixtureElements.markets)for(h=this._fixtureElements.markets[c],s=h.participants.elements,i=0,u=s.length;i<u;i++)f=s[i],f.handicap&&(b365Mobile.utils.addOrAppendClass(f.handicap,"Hidden"),b365Mobile.utils.addOrAppendClass(f.odds,"Hidden"))}},n}();b365.IPPGCricketScoreFormatter=function(){function n(n){this._fixtureElements=n}var t=b365.Attribute;return n.prototype.dataAttribute=t.SHORT_SCORE,n.prototype.method=function(n){for(var u=this._fixtureElements.scores,r=n.data[t.SHORT_SCORE].split(","),i=0,f=u.length;i<f;i++)r[0]&&(u[i][0].textContent=r[0]),r[1]&&(u[i][1].textContent=r[1])},n}();b365.IPPGPeriodFormatter=function(){function n(n){n&&n.metainfo&&n.metainfo[0]&&(this._metaInfo=n.metainfo)}var t=b365.Attribute;return n.prototype.dataAttribute=t.CURRENT_PERIOD,n.prototype.method=function(n){var i,t,u,r,f=n.data[this.dataAttribute];if(this._metaInfo&&f)for(r=0,u=this._metaInfo.length;r<u;r++)i=this._metaInfo[r][0].getElementsByClassName("ippg-Market_GameInfo")[0],t=i.querySelector(".ippg-Market_GamePeriod"),t||(t=document.createElement("span"),t.className="ippg-Market_GamePeriod",i.insertBefore(t,i.children[0])),t.textContent=f,b365Mobile.utils.addOrAppendClass(i,"active")},n}();b365.IPPGMarketInfoFormatter=function(){function n(n){n&&n.metainfo&&(this._metaInfo=n.metainfo,this._marketCountElements=[])}var t=b365.Attribute;return n.prototype.dataAttribute=t.LIVE_MARKETS,n.prototype.method=function(n){var t,i;for(this._marketCountElements.length===0&&this._createMarketCounterElements(),t=0,i=this._metaInfo.length;t<i;t++)this._marketCountElements[t].textContent=n.data[this.dataAttribute]},n.prototype._createMarketCounterElements=function(){for(var n,i,u="ippg-Market_MarketCount",t=0,r=this._metaInfo.length;t<r;t++)n=this._metaInfo[t][0].querySelector("."+u),i=this._metaInfo[t][0].querySelector("#FixtureIconsContainer"),n||(n=document.createElement("div"),b365Mobile.utils.addOrAppendClass(n,u),i?this._metaInfo[t][0].insertBefore(n,i):this._metaInfo[t][0].appendChild(n)),this._marketCountElements.push(n)},n}();b365.IPPGTennisGameFormatter=function(){function n(n){b365.IPPGSetsBasedSportFormatter.call(this,n);this._fixtureElements=n.fixtures}var t=b365.Attribute;return n.prototype=Object.create(b365.IPPGSetsBasedSportFormatter.prototype),n.constructor=n,n.prototype.dataAttribute=[t.SHORT_SCORE,t.SHORT_POINTS],n.prototype._getScores=function(n){var i=(n[t.SHORT_SCORE]||"0-0").split(","),r=n[t.SHORT_POINTS]||"0-0",u=n[t.SCOREBOARD_STYLE]||"0";return ns_inplaylib_utils.FixtureDataConverter.ConvertScoreToShortTennisScore(i,r,u)},n.prototype._displayScores=function(n){var r,i,u;if(b365.IPPGSetsBasedSportFormatter.prototype._displayScores.call(this,n),r="2",n[t.SCOREBOARD_STYLE]===r)for(i=0;i<this._fixtureElements.length;i++)u=this._fixtureElements[i],b365Mobile.utils.addOrAppendClass(u,"ippg-SingleGameTennis")},n}();b365.IPPGFixtureDeleteFormatter=function(){function n(n){this._fixtureElements=n;n&&n.metainfo&&(this._metaInfo=n.metainfo);n&&n.metainfo&&(this._fixtures=n.fixtures)}var t="_X";return n.prototype.dataAttribute=t,n.prototype.method=function(n){var u,f,e,r,i,o;if(n&&n.data&&n.data[t]==="1"){for(i=0,o=this._fixtures.length;i<o;i++)this._fixtures[i]&&(e=this._fixtures[i],e&&e.setAttribute("data-nav","")),this._metaInfo[i]&&(r=this._metaInfo[i][0],u=r.getElementsByClassName("ippg-Market_GameInfo")[0],u&&r.removeChild(u),f=r.getElementsByClassName("ippg-Market_MarketCount")[0],f&&r.removeChild(f));n.remove()}},n}();b365.IPPGHorseRacingFixtureDeleteFormatter=function(){function n(){}var t="_X";return n.prototype.dataAttribute=t,n.prototype.method=function(n){n&&n.data&&n.data[t]==="1"&&window.location.reload(!0)},n}();b365.IPPGHorseRacingStartFormatter=function(){function n(n){this._fixtureElement=null;n&&n.fixtures&&n.fixtures.length&&(this._fixtureElement=n.fixtures[0])}var t=b365.Attribute;return n.prototype.dataAttribute=t.FIXTURE_STARTED,n.prototype.method=function(n){this._fixtureElement&&n&&n.data&&n.data[t.FIXTURE_STARTED]==="1"&&(b365Mobile.utils.addOrAppendClass(this._fixtureElement,"ippg-fixtureStarted"),b365Mobile.Racing.hideAllEnhancedRacingUiElements(),couponController.stop())},n}();b365.IPPGPitcherNameFormatter=function(){function n(n){this._fixtureElements=n;n&&n.metainfo&&(this._metaInfo=n.metainfo);n&&n.metainfo&&(this._fixtures=n.fixtures)}var t=b365.Attribute;return n.prototype.dataAttribute=t.FIXTURE_STARTED,n.prototype.method=function(n){var r,u,i;if(n&&n.data&&n.data[t.FIXTURE_STARTED]==="1")for(r=0,u=this._fixtures.length;r<u;r++)i=this._fixtures[r].getElementsByClassName("pitcher"),i[1]&&i[1].parentNode&&i[1].parentNode.removeChild(i[1]),i[0]&&i[0].parentNode&&i[0].parentNode.removeChild(i[0])},n}();b365.IPPG=b365.IPPG||{};b365.IPPG.MarketFormatters=b365.IPPG.MarketFormatters||{};b365.IPPG.MarketFormatters.Common=function(){var n="ippg-CardNo";return REGEX_REPLACE_PATTERN=/(.*)\(.+\).*/,CSS_CLASS_PARTICIPANT_NAME="ippg-ParticipantName",findParticipant=function(n,t,i,r){var o=i.elements.length,f=i.elements,u=null,e;if(f&&t>-1&&t<f.length&&(u=f[t],r(u)))return u;for(e=0;e<o;e++)if(u=f[e],r(u))return u;return null},{findParticipantItemByIndex:function(n,t,i){return i&&t>-1&&t<i.elements.length?i.elements[t]:null},findParticipantByName:function(n,t,i){return findParticipant(n,t,i,function(t){return t.htmlName||(t.htmlName=t.participant.getElementsByClassName(CSS_CLASS_PARTICIPANT_NAME)[0].textContent.trim()),t.htmlName===n.data[Attribute.NAME]})},findParticipantItemByCardNumber:function(t,i,r){return findParticipant(t,i,r,function(i){return i.cardNumber||(i.cardNumber=i.participant.getElementsByClassName(n)[0].textContent.replace(REGEX_REPLACE_PATTERN,"$1").trim()),i.cardNumber===t.data[Attribute.CLOTH_NUMBER]})}}}();b365.IPPGExtraTimeMarketFormatter=function(){function n(n){this._participantLookup=n}var t=b365.Attribute;return n.prototype.dataAttribute=t.PARTICIPANT_STYLE,n.prototype.method=function(n,t){var f=this._participantLookup[t],h=n.parent._actualChildren.indexOf(n),e=n.data[this.dataAttribute],i,r,u,o,s="ippg-Market_ExtraTimeParticipant";if(e&&!isNaN(h)&&e=="br")for(i=0;i<f.elements.length;i++)r=f.elements[i].participant,o=r.getElementsByClassName(s),o.length==0&&(u=document.createElement("div"),u.className=s,u.appendChild(document.createTextNode(b365.ml.ExtraTimeShort)),r.insertBefore(u,r.firstChild))},n}();b365.IPPGOddsFormatter=function(){function n(n){t=this;this._participantLookup=n}var t=null;return Attribute=b365.Attribute,OddsConverter=ns_gen5_util.OddsConverter,OddsAvailable=ns_gen5_util.OddsAvailable,OddsType=ns_gen5_util.OddsType,BetConstructor=ns_betslip.BetConstructor,n.prototype.dataAttribute=Attribute.ODDS,n.prototype.findParticipantItem=b365.IPPG.MarketFormatters.Common.findParticipantItemByIndex,n.prototype.method=function(n,t){var f=this._participantLookup[t],s=n.parent._actualChildren.indexOf(n),e=n.data[Attribute.ODDS],o,h,r,u,i;e&&!isNaN(s)&&(i=this.findParticipantItem(n,s,f),i&&i.odds&&i.participant&&(u=i.participant,o=f._createBetItem(n),r=f._oddsDisplayFormatter(e,n,o.decimalPlaces),r.areOddsAvailable!=OddsAvailable.AVAILABLE&&b365Mobile.utils.addOrAppendClass(u,"ippg-Participant_OddsUnavailable"),r.areOddsAvailable!=OddsAvailable.NOT_OFFERED&&e===OddsConverter.NOT_OFFERED&&b365Mobile.utils.removeClass(u,"ippg-Participant_OddsUnavailable"),i.odds.textContent=r.odds,b365Mobile.utils.removeClass(i.odds,"Hidden"),h=BetConstructor.SetConstructOnBetItem(o),u.setAttribute("data-nav",h.constructString)))},n}();b365.IPPGHorseOddsFormatter=function(){function n(n){b365.IPPGOddsFormatter.call(this,n)}return n.prototype=Object.create(b365.IPPGOddsFormatter.prototype),n.prototype.findParticipantItem=b365.IPPG.MarketFormatters.Common.findParticipantByName,n}();b365.IPPGHorseEachWayTermsFormatter=function(){function n(){this._eachWayTermsElement=null;this._hasEwElemVisibilityBeenEnsured=!1;var n=document.getElementsByClassName("ippg-EachWayTerms");n&&n.length&&(this._eachWayTermsElement=n[0])}return Attribute=b365.Attribute,n.prototype.dataAttribute=Attribute.CURRENT_INFO_V4,n.prototype.method=function(n){this._eachWayTermsElement&&n.data[this.dataAttribute]&&(this._hasEwElemVisibilityBeenEnsured||(this._hasEwElemVisibilityBeenEnsured=!0,b365Mobile.Racing.showHeaderEachWayTermsElement(this._eachWayTermsElement,!0)),this._eachWayTermsElement.textContent=n.data[this.dataAttribute])},n}();b365.IPPGSuspendFormatter=function(){function n(n){this._participantLookup=n}var t=b365.Attribute;return n.prototype.dataAttribute=t.SUSPENDED,n.prototype.suspendClass="ippg-Participant_Suspended",n.prototype.findParticipantItem=b365.IPPG.MarketFormatters.Common.findParticipantItemByIndex,n.prototype.method=function(n,i){var e=this._participantLookup[i],o=n.parent._actualChildren.indexOf(n),f=this.findParticipantItem(n,o,e),s=n.data[t.SUSPENDED],r,u;s&&!isNaN(o)&&f&&f.participant&&(r=f.participant,s==="1"?(b365Mobile.utils.addOrAppendClass(r,this.suspendClass),b365Mobile.utils.removeClass(r,"Selected"),r.setAttribute("data-nav","")):(b365Mobile.utils.removeClass(r,this.suspendClass),Locator.betSlipManager.isSelected(n.data[t.ID])&&b365Mobile.utils.addOrAppendClass(r,"Selected"),u=e._createBetItem(n),u=BetConstructor.SetConstructOnBetItem(u),r.setAttribute("data-nav",u.constructString)))},n}();b365.IPPGHorseSuspendFormatter=function(){function n(n){b365.IPPGSuspendFormatter.call(this,n)}return n.prototype=Object.create(b365.IPPGSuspendFormatter.prototype),n.prototype.findParticipantItem=b365.IPPG.MarketFormatters.Common.findParticipantByName,n.prototype.suspendClass="Suspended",n}();b365.IPPGHandicapFormatter=function(){function n(n){this._participantLookup=n}var t=b365.Attribute;return n.prototype.dataAttribute=t.LABEL,n.prototype.method=function(n,t){var i=this._participantLookup[t],r=n.parent._actualChildren.indexOf(n),u=n.data[this.dataAttribute],f,e,o;u&&!isNaN(r)&&i.elements[r]&&i.elements[r].handicap&&(b365Mobile.utils.removeClass(i.elements[r].handicap,"Hidden"),i.elements[r].handicap.textContent=u,f=i._createBetItem(n),e=BetConstructor.SetConstructOnBetItem(f),o=i.elements[r].participant,o.setAttribute("data-nav",e.constructString))},n}();b365.IPPGUSSportsHandicapFormatter=function(){function t(n){b365.IPPGHandicapFormatter.call(this,n)}var n=b365.Attribute,i={"190212":{Name:"RL_TotalPoints3wayTOTALInPlay",Format:"OVER_UNDER"},"80160":{Name:"RU_TotalPoints3way",Format:"OVER_UNDER"},"80193":{Name:"RU_WinningMargin5way",Format:"WINNING_MARGIN"},"190231":{Name:"RL_WinningMargin5way",Format:"WINNING_MARGIN"},"360477":{Name:"AR_WinningMargin5way",Format:"WINNING_MARGIN"}};return t.prototype=Object.create(b365.IPPGHandicapFormatter.prototype),t.prototype.dataAttribute=[n.HANDICAP_FORMATTED,n.NAME,n.COMMENT],t.constructor=t,t.prototype.method=function(n,t){var i=this._participantLookup[t],r=n.parent._actualChildren.indexOf(n),u="",e=this._getPlbtid(n),f,o,s,h;(e&&(f=this._getAttributeLookup(e)),f&&(u=this._formatHandicap(n,f.Format)),u&&!isNaN(r))&&(i.elements[r]&&i.elements[r].handicap&&(b365Mobile.utils.removeClass(i.elements[r].handicap,"Hidden"),i.elements[r].handicap.textContent=u),o=i._createBetItem(n),s=BetConstructor.SetConstructOnBetItem(o),h=i.elements[r].participant,h.setAttribute("data-nav",s.constructString))},t.prototype._formatHandicap=function(t,i){var r="";switch(i){case"NAME_ONLY":r=t.data[n.NAME];break;case"NAME_AND_HANDICAP":r=t.data[n.NAME]+" "+t.data[n.HANDICAP_FORMATTED];break;case"HANDICAP_ONLY":r=t.data[n.HANDICAP_FORMATTED];break;case"OVER_UNDER":r=t.data[n.COMMENT];break;case"WINNING_MARGIN":r=t.data[n.INRUNNING_INFO]}return r},t.prototype._getPlbtid=function(t){var i="";return t.parent&&t.parent.nodeName===n.MARKET?i=t.parent.data[n.ID]:t.parent.parent&&t.parent.parent.nodeName===n.MARKET&&(i=t.parent.parent.data[n.ID]),i},t.prototype._getAttributeLookup=function(n){var t;return i[n]&&(t=i[n]),t?t:{Format:"HANDICAP_ONLY"}},t}();b365.IPPGAmericanFootballFormatters=function(){function n(){}return n.prototype.fixtureFormatters=[b365.IPPGStartFormatter,b365.IPPGScoreFormatter,b365.IPPGPeriodFormatter,b365.IPPGClockFormatter,b365.IPPGMarketInfoFormatter,b365.IPPGFixtureDeleteFormatter],n.prototype.marketFormatters=[b365.IPPGOddsFormatter,b365.IPPGUSSportsHandicapFormatter,b365.IPPGSuspendFormatter],n}();b365.IPPGAussieRulesFormatters=function(){function n(){}return n.prototype.fixtureFormatters=[b365.IPPGStartFormatter,b365.IPPGScoreFormatter,b365.IPPGPeriodFormatter,b365.IPPGClockFormatter,b365.IPPGMarketInfoFormatter,b365.IPPGFixtureDeleteFormatter],n.prototype.marketFormatters=[b365.IPPGOddsFormatter,b365.IPPGUSSportsHandicapFormatter,b365.IPPGSuspendFormatter],n}();b365.IPPGBaseballFormatters=function(){function n(){}return n.prototype.fixtureFormatters=[b365.IPPGStartFormatter,b365.IPPGScoreFormatter,b365.IPPGPeriodFormatter,b365.IPPGClockFormatter,b365.IPPGMarketInfoFormatter,b365.IPPGFixtureDeleteFormatter,b365.IPPGPitcherNameFormatter],n.prototype.marketFormatters=[b365.IPPGOddsFormatter,b365.IPPGUSSportsHandicapFormatter,b365.IPPGSuspendFormatter],n}();b365.IPPGBasketballFormatters=function(){function n(){}return n.prototype.fixtureFormatters=[b365.IPPGStartFormatter,b365.IPPGScoreFormatter,b365.IPPGPeriodFormatter,b365.IPPGClockFormatter,b365.IPPGMarketInfoFormatter,b365.IPPGFixtureDeleteFormatter],n.prototype.marketFormatters=[b365.IPPGOddsFormatter,b365.IPPGUSSportsHandicapFormatter,b365.IPPGSuspendFormatter],n}();b365.IPPGCricketFormatters=function(){function n(){}return n.prototype.fixtureFormatters=[b365.IPPGStartFormatter,b365.IPPGCricketScoreFormatter,b365.IPPGMarketInfoFormatter,b365.IPPGFixtureDeleteFormatter],n.prototype.marketFormatters=[b365.IPPGOddsFormatter,b365.IPPGHandicapFormatter,b365.IPPGSuspendFormatter],n}();b365.IPPGDartsFormatters=function(){function n(){}return n.prototype.fixtureFormatters=[b365.IPPGStartFormatter,b365.IPPGScoreFormatter,b365.IPPGMarketInfoFormatter,b365.IPPGFixtureDeleteFormatter],n.prototype.marketFormatters=[b365.IPPGOddsFormatter,b365.IPPGHandicapFormatter,b365.IPPGSuspendFormatter],n}();b365.IPPGFloorballFormatters=function(){function n(){}return n.prototype.fixtureFormatters=[b365.IPPGStartFormatter,b365.IPPGScoreFormatter,b365.IPPGClockFormatter,b365.IPPGMarketInfoFormatter,b365.IPPGFixtureDeleteFormatter],n.prototype.marketFormatters=[b365.IPPGOddsFormatter,b365.IPPGHandicapFormatter,b365.IPPGSuspendFormatter],n}();b365.IPPGFutsalFormatters=function(){function n(){}return n.prototype.fixtureFormatters=[b365.IPPGStartFormatter,b365.IPPGScoreFormatter,b365.IPPGPeriodFormatter,b365.IPPGClockFormatter,b365.IPPGMarketInfoFormatter,b365.IPPGFixtureDeleteFormatter],n.prototype.marketFormatters=[b365.IPPGOddsFormatter,b365.IPPGHandicapFormatter,b365.IPPGSuspendFormatter],n}();b365.IPPGGaelicSportsFormatters=function(){function n(){}return n.prototype.fixtureFormatters=[b365.IPPGStartFormatter,b365.IPPGGaelicSportsScoreFormatter,b365.IPPGPeriodFormatter,b365.IPPGClockFormatter,b365.IPPGMarketInfoFormatter,b365.IPPGFixtureDeleteFormatter],n.prototype.marketFormatters=[b365.IPPGOddsFormatter,b365.IPPGUSSportsHandicapFormatter,b365.IPPGSuspendFormatter],n}();b365.IPPGHandballFormatters=function(){function n(){}return n.prototype.fixtureFormatters=[b365.IPPGStartFormatter,b365.IPPGScoreFormatter,b365.IPPGClockFormatter,b365.IPPGMarketInfoFormatter,b365.IPPGFixtureDeleteFormatter],n.prototype.marketFormatters=[b365.IPPGOddsFormatter,b365.IPPGUSSportsHandicapFormatter,b365.IPPGSuspendFormatter],n}();b365.IPPGIceHockeyFormatters=function(){function n(){}return n.prototype.fixtureFormatters=[b365.IPPGStartFormatter,b365.IPPGScoreFormatter,b365.IPPGPeriodFormatter,b365.IPPGClockFormatter,b365.IPPGMarketInfoFormatter,b365.IPPGFixtureDeleteFormatter],n.prototype.marketFormatters=[b365.IPPGOddsFormatter,b365.IPPGUSSportsHandicapFormatter,b365.IPPGSuspendFormatter],n}();b365.IPPGRugbyLeagueFormatters=function(){function n(){}return n.prototype.fixtureFormatters=[b365.IPPGStartFormatter,b365.IPPGScoreFormatter,b365.IPPGClockFormatter,b365.IPPGMarketInfoFormatter,b365.IPPGFixtureDeleteFormatter],n.prototype.marketFormatters=[b365.IPPGOddsFormatter,b365.IPPGUSSportsHandicapFormatter,b365.IPPGSuspendFormatter],n}();b365.IPPGRugbyUnionFormatters=function(){function n(){}return n.prototype.fixtureFormatters=[b365.IPPGStartFormatter,b365.IPPGScoreFormatter,b365.IPPGClockFormatter,b365.IPPGMarketInfoFormatter,b365.IPPGFixtureDeleteFormatter],n.prototype.marketFormatters=[b365.IPPGOddsFormatter,b365.IPPGUSSportsHandicapFormatter,b365.IPPGSuspendFormatter],n}();b365.IPPGSnookerFormatters=function(){function n(){}return n.prototype.fixtureFormatters=[b365.IPPGStartFormatter,b365.IPPGScoreFormatter,b365.IPPGMarketInfoFormatter,b365.IPPGFixtureDeleteFormatter],n.prototype.marketFormatters=[b365.IPPGOddsFormatter,b365.IPPGHandicapFormatter,b365.IPPGSuspendFormatter],n}();b365.IPPGSoccerFormatters=function(){function n(){}return n.prototype.fixtureFormatters=[b365.IPPGStartFormatter,b365.IPPGScoreFormatter,b365.IPPGClockFormatter,b365.IPPGMarketInfoFormatter,b365.IPPGFixtureDeleteFormatter,b365.IPPGExtraTimeFormatter],n.prototype.marketFormatters=[b365.IPPGOddsFormatter,b365.IPPGHandicapFormatter,b365.IPPGSuspendFormatter,b365.IPPGExtraTimeMarketFormatter],n}();b365.IPPGTennisFormatters=function(){function n(){}return n.prototype.fixtureFormatters=[b365.IPPGStartFormatter,b365.IPPGTennisGameFormatter,b365.IPPGMarketInfoFormatter,b365.IPPGFixtureDeleteFormatter],n.prototype.marketFormatters=[b365.IPPGOddsFormatter,b365.IPPGHandicapFormatter,b365.IPPGSuspendFormatter],n}();b365.IPPGVolleyballFormatters=function(){function n(){}return n.prototype.fixtureFormatters=[b365.IPPGStartFormatter,b365.IPPGSetsBasedSportFormatter,b365.IPPGMarketInfoFormatter,b365.IPPGFixtureDeleteFormatter],n.prototype.marketFormatters=[b365.IPPGOddsFormatter,b365.IPPGUSSportsHandicapFormatter,b365.IPPGSuspendFormatter],n}();b365.IPPGBoxingFormatters=function(){function n(){}return n.prototype.fixtureFormatters=[b365.IPPGStartFormatter,b365.IPPGFixtureDeleteFormatter],n.prototype.marketFormatters=[b365.IPPGOddsFormatter,b365.IPPGSuspendFormatter],n}();b365.IPPGHorseRacingFormatters=function(){function n(){}return n.prototype.fixtureFormatters=[b365.IPPGHorseRacingStartFormatter,b365.IPPGHorseRacingFixtureDeleteFormatter],n.prototype.marketFormatters=[b365.IPPGHorseOddsFormatter,b365.IPPGHorseSuspendFormatter,b365.IPPGHorseEachWayTermsFormatter],n}();b365.IPPGController=function(){function n(n){i=this;this._aggregator||(this._aggregator=new b365.aggregator);this.classificationId=n;this._participantLookup={};this._lookup={};this._inPlayMarketTopics=[];this._eachWayTermsElement=null;this._domlookup();b365.ml?this._register():window.getLanguages(function(){i._register()})}var i=null,t=b365.Attribute,r=ns_gen5_util.OddsConverter,u=ns_gen5_util.OddsAvailable,f=ns_gen5_util.OddsType;return n.prototype._formatterMappingContainer={"1":b365.IPPGSoccerFormatters,"2":b365.IPPGHorseRacingFormatters,"3":b365.IPPGCricketFormatters,"8":b365.IPPGRugbyUnionFormatters,"9":b365.IPPGBoxingFormatters,"12":b365.IPPGAmericanFootballFormatters,"13":b365.IPPGTennisFormatters,"14":b365.IPPGSnookerFormatters,"15":b365.IPPGDartsFormatters,"16":b365.IPPGBaseballFormatters,"17":b365.IPPGIceHockeyFormatters,"18":b365.IPPGBasketballFormatters,"19":b365.IPPGRugbyLeagueFormatters,"36":b365.IPPGAussieRulesFormatters,"37":b365.IPPGGaelicSportsFormatters,"75":b365.IPPGGaelicSportsFormatters,"78":b365.IPPGHandballFormatters,"83":b365.IPPGFutsalFormatters,"90":b365.IPPGFloorballFormatters,"91":b365.IPPGVolleyballFormatters},n.prototype.dispose=function(){this._aggregator&&(this._aggregator.dispose(),this._aggregator=null);i=null},n.prototype._domlookup=function(){var c,h=0,l,n,v,r,a,u,s,t,i,f,o,e,y,p,w,b,k;if(c=document.getElementsByClassName("ippg-Market"),l=c.length,!(l<=0))for(h;h<l;h++)if((r=c[h],k=r.getAttribute("data-plbtid"),t=r.getElementsByClassName("ippg-Market_Topic"),t.length!==0)&&(s=t[0].getAttribute("data-inplaytopic"),s)){for(a=r.getElementsByClassName("ippg-Market_CompetitorScores"),u=r.getElementsByClassName("ippg-Market_MetaContainer"),i=this._lookup[s],i?(i.fixtures.push(r),i.scores.push(a),i.metainfo.push(u&&u.length?u:null)):(p=[r],w=[a],b=u&&u.length?[u]:[null],i=this._lookup[s]={topicId:s,fixtures:p,scores:w,metainfo:b,markets:{},plbtid:k}),v=t.length,n=0,y=[],n;n<v;n++)e=t[n].getAttribute("data-inplaymarkettopic"),this._inPlayMarketTopics.indexOf(e)===-1&&this._inPlayMarketTopics.push(e),o=this._participantLookup[e],o||(o=this._participantLookup[e]={elements:[],_oddsDisplayFormatter:this._oddsDisplayFormatter,_createBetItem:this._createBetItem,_betslip_oddsTypeOverride:this._betslip_oddsTypeOverride,_betslip_decimalPlaces:this._betslip_decimalPlaces}),o.elements.push({participant:t[n],odds:t[n].getElementsByClassName("ippg-Market_Odds")[0],handicap:t[n].getElementsByClassName("ippg-Market_Handicap")[0]}),f=i.markets[e],f||(f=i.markets[e]={},f.participantCount=0),f.participantCount++,f.participants=o,f.altmarkettopic=t[n].getAttribute("data-inplayaltmarkettopic");y=o}},n.prototype._register=function(){var n,t=this._formatterMappingContainer[this.classificationId],i,r;if(t&&typeof t=="function"&&this._aggregator){i=new t;for(r in this._lookup)n=this._lookup[r],n.topicId!=""&&(this._registerClassificationTopicFormatters(n,i.fixtureFormatters),this._registerParticipants(n,i.marketFormatters));this._aggregator.start()}},n.prototype._registerClassificationTopicFormatters=function(n,t){var r,u,i=0,f;for(i,f=t.length;i<f;i++)t[i]&&(r=new t[i](n),u=new b365.aggregator.StemTopicHandler(n.topicId,r.dataAttribute,this._createBoundCallback(r,r.method)),this._aggregator.registerFixtureHandlers(u))},n.prototype._registerParticipants=function(n,t){var r,u,f,i=0,e,o;for(i,e=t.length;i<e;i++)if(t[i]){u=t[i];r=new u(this._participantLookup,n.plbtid);for(o in n.markets)f=new b365.aggregator.StemTopicHandler(o,r.dataAttribute,this._createBoundCallback(r,r.method)),this._aggregator.registerMarketHandlers(this.classificationId.toString(),n.topicId,n.markets,f)}},n.prototype._createBoundCallback=function(n,t){return function(i,r){t.call(n,i,r)}},n.prototype._oddsDisplayFormatter=function(n,t,i){var e,o;return e=r.AreOddsAvailable(t),o=this._betslip_oddsTypeOverride(t)||window.Locator.user.oddsTypeId,e!=u.AVAILABLE?n=e==u.NOT_OFFERED?r.NOT_OFFERED:"":n=="0/0"?n=window.Locator.languageResource.getValue("SP","SP"):o==f.DECIMAL?n=r.ConvertOddsDecimal(n,i):o==f.AMERICAN&&(n=r.ConvertOddsUS(n)),{odds:n,areOddsAvailable:e}},n.prototype._createBetItem=function(n){var r=new ns_betslip.BetItem;return r.partType="N",r.participantID=n.data[t.ID],r.odds=n.data[t.ODDS],r.handicap=n.data[t.HANDICAP]||"",r.classificationID=n.data[t.CLASSIFICATION],r.fixtureID=n.data[t.FIXTURE_PARENT_ID],r.marketID="",r.uid=n.data[t.ID],r.pom=n.data[t.PHONE_ONLY],r.oddsTypeOverride=i._betslip_oddsTypeOverride(n),r.decimalPlaces=i._betslip_decimalPlaces(n),r.subscribe=!0,r.betsource="",r.updateItem(),r},n.prototype._betslip_oddsTypeOverride=function(n){var i=n.parent.data[t.STYLE],u=n.parent.data[t.PARTICIPANT_STYLE],r=Number(i);return r==3||r==11||i==="BF"&&u==="C"?2:0},n.prototype._betslip_decimalPlaces=function(n){var t=i._betslip_oddsTypeOverride(n),r=Locator.user.countryId==="97";return t&&!r?3:2},n}()